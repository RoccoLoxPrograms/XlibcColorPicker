<!DOCTYPE html> <!-- February 2021 - RoccoLox Programs -->
<!-- 
    Thank you Privacy_Dragon for your suggestions.
    Thank you mr womp womp and KMisthebomb for your code suggestions.
    Thank you to anyone else who suggested features and has used this program.
-->
<html lang="en">
    <head>
        <title>Xlibc Color Picker</title>
        <style type="text/css"> /* CSS styling */
            body {
                background-color: rgb(235,235,235);
            }
            td {
                cursor: pointer; /* thank you KMisthebomb */
                width: 35px;
                height: 35px;
                border-style: none;
            }
            td.osColors {
                width: 6.6%;
                text-align: center;
                color: #ffffff;
                font-family: sans-serif;
                font-weight: bold;
                border-style: none;
            }
            table {
                display: table;
                margin: auto;
                border-style: hidden;
            }
            p {
                text-align: center;
                font-weight: bold;
                font-size: 300%;
                padding: 2%;
                font-family: sans-serif;
                margin: 40px auto 25px auto;
            }
            p.rgb {
                text-align: center;
                font-family: sans-serif;
                font-size: 45%;
                margin: 0px;
                padding: 10px 0px 0px 0px;
            }
            p.osRGB {
                text-align: center;
                font-family: sans-serif;
                font-size: 125%;
            }
            h1 {
                margin: 5px 0px 30px 0px;
                text-align: center;
                font-size: 250%;
                font-family: sans-serif;
                font-weight: normal;
                text-decoration: underline;
            }
            h3 {
                color: #000000;
                margin: 0px;
                cursor: pointer;
            }
            footer {
                bottom: 0px;
                left: 0px;
                position: fixed;
                width: 100%;
            }
            a {
                text-decoration: none;
                color: #0179f9;
                font-family: sans-serif;
                font-size: 110%;
                padding: 0px 5px 5px 5px;
            }
        </style>
        <script type="text/javascript">
            // thank you Privacy_Dragon
            // display xlibc colors
            function color(n,r,g,b,hex,c1555) {
                // remove TI-OS color box
                document.getElementById('osRGB').setAttribute("style","padding: 0px; margin: 0px;");
                document.getElementById('osRGB').innerHTML = '';
                if (n > 131 && n % 8 > 3) {
                    if (localStorage.getItem("xlibcMode") == 'light') { // for light mode
                        document.getElementById('text').setAttribute('style',`background-color: rgb(${r},${g},${b}); color: #000000; border-color: #000000; border-width: thin; border-style: solid;`); // display xlibc color
                    } else { // for dark mode
                        document.getElementById('text').setAttribute('style',`background-color: rgb(${r},${g},${b}); color: #000000; border-color: #ffffff; border-width: thin; border-style: solid;`); // display xlibc color
                    }
                } else {
                    if (localStorage.getItem("xlibcMode") == 'light') { // for light mode
                        document.getElementById('text').setAttribute('style',`background-color: rgb(${r},${g},${b}); color: #ffffff; border-color: #000000; border-width: thin; border-style: solid;`); // display xlibc color
                    } else { // for dark mode
                        document.getElementById('text').setAttribute('style',`background-color: rgb(${r},${g},${b}); color: #ffffff; border-color: #ffffff; border-width: thin; border-style: solid;`); // display xlibc color
                    }
                }
                c1555 = c1555.toString(16).toUpperCase(); // convert the 1555 value
                // add additional 0's
                if (c1555.length == 1) c1555 = '0x000' + c1555;
                else if (c1555.length == 2) c1555 = '0x00' + c1555;
                else if (c1555.length == 3) c1555 = '0x0' + c1555;
                else if (c1555.length == 4) c1555 = '0x' + c1555;
                document.getElementById('text').innerHTML = `${n}<br>${hex}<p class="rgb">R: ${r} G: ${g} B: ${b}<br>1555: ${c1555}</p>`; // display xlibc values
                if (oldn > 264 && oldn < 270)  document.getElementsByTagName('td')[oldn].setAttribute("style",`background-color: rgb(${oldr},${oldg},${oldb}); color: #000000;`); // remove selection box
                else document.getElementsByTagName('td')[oldn].setAttribute("style",`background-color: rgb(${oldr},${oldg},${oldb});`);
                if (n > 131 && n % 8 > 3) document.getElementsByTagName('td')[n].setAttribute("style",`background-color: rgb(${r},${g},${b}); border: solid black 1px; padding: 0px;`); // add selection box
                else document.getElementsByTagName('td')[n].setAttribute("style",`background-color: rgb(${r},${g},${b}); border: solid white 1px; padding: 0px;`);
                // copy variable values
                oldn = n;
                oldr = r;
                oldg = g;
                oldb = b;
            }

            // display TI-OS colors
            function OScolor(n,r,g,b,hex,or,og,ob,tagNum,c1555,OSc1555) {
                // remove selection box
                document.getElementsByTagName('td')[oldn].setAttribute("style",`background-color: rgb(${oldr},${oldg},${oldb});`);
                if (tagNum > 264 && tagNum < 270) {
                    if (localStorage.getItem("xlibcMode") == 'light') { // for light mode
                        document.getElementById('text').setAttribute('style',`background-color: rgb(${r},${g},${b}); color: #000000; border-color: #000000; border-width: thin; border-style: solid; padding: 0.5% 2%; margin: 40px 0px 0px 0px;`); // display xlibc equivalent
                        document.getElementById('osRGB').setAttribute('style',`background-color: rgb(${or},${og},${ob}); color: #000000; border-color: #000000; border-width: thin; border-style: solid; padding: 0.5% 2%; margin: 0px;`); // display actual color
                    } else { // for dark mode
                        document.getElementById('text').setAttribute('style',`background-color: rgb(${r},${g},${b}); color: #000000; border-color: #ffffff; border-width: thin; border-style: solid; padding: 0.5% 2%; margin: 40px 0px 0px 0px;`); // display xlibc equivalent
                        document.getElementById('osRGB').setAttribute('style',`background-color: rgb(${or},${og},${ob}); color: #000000; border-color: #ffffff; border-width: thin; border-style: solid; padding: 0.5% 2%; margin: 0px;`); // display actual color
                    }
                } else {
                    if (localStorage.getItem("xlibcMode") == 'light') { // for light mode
                        document.getElementById('text').setAttribute('style',`background-color: rgb(${r},${g},${b}); color: #ffffff; border-color: #000000; border-width: thin; border-style: solid; padding: 0.5% 1%; margin: 40px 0px 0px 0px;`); // display xlibc equivalent
                        document.getElementById('osRGB').setAttribute('style',`background-color: rgb(${or},${og},${ob}); color: #ffffff; border-color: #000000; border-width: thin; border-style: solid; padding: 0.5% 2%; margin: 0px;`); // display actual color
                    } else { // for dark mode
                        document.getElementById('text').setAttribute('style',`background-color: rgb(${r},${g},${b}); color: #ffffff; border-color: #ffffff; border-width: thin; border-style: solid; padding: 0.5% 2%; margin: 30px 0px 0px 0px;`); // display xlibc equivalent
                        document.getElementById('osRGB').setAttribute('style',`background-color: rgb(${or},${og},${ob}); color: #ffffff; border-color: #ffffff; border-width: thin; border-style: solid; padding: 0.5% 2%; margin: 0px;`); // display actual color
                    }
                }
                document.getElementById('text').innerHTML = `${n}<br>${hex}<p class="rgb">R: ${r} G: ${g} B: ${b}<br>1555: ${c1555}</p>`; // xlibc equivalent color value
                document.getElementById('osRGB').innerHTML = `R: ${or} G: ${og} B: ${ob}<br>1555: ${OSc1555}`; // display actual rgb value
                if (oldn > 264 && oldn < 270)  document.getElementsByTagName('td')[oldn].setAttribute("style",`background-color: rgb(${oldr},${oldg},${oldb}); color: #000000;`); // remove selection box
                else document.getElementsByTagName('td')[oldn].setAttribute("style",`background-color: rgb(${oldr},${oldg},${oldb});`);
                if (tagNum > 264 && tagNum < 270) document.getElementsByTagName('td')[tagNum].setAttribute("style",`background-color: rgb(${or},${og},${ob}); color: #000000; border: solid black 1px; padding: 0px;`); // add selection box
                else document.getElementsByTagName('td')[tagNum].setAttribute("style",`background-color: rgb(${or},${og},${ob}); border: solid white 1px; padding: 0px;`);
                // copy variable values
                oldn = tagNum;
                oldr = or;
                oldg = og;
                oldb = ob;
            }

            // mode changes
            function changemode() {
                // restore default positions
                if (oldn > 264 && oldn < 270) document.getElementsByTagName('td')[oldn].setAttribute("style",`background-color: rgb(${oldr},${oldg},${oldb}); color: #000000;`);
                else document.getElementsByTagName('td')[oldn].setAttribute("style",`background-color: rgb(${oldr},${oldg},${oldb});`);
                document.getElementById('osRGB').setAttribute("style","padding: 0px; margin: 0px;");
                document.getElementById('osRGB').innerHTML = '';
                if (localStorage.getItem("xlibcMode") == 'light') { // change mode
                    localStorage.setItem("xlibcMode","dark");
                    darkmode();
                } else {
                    localStorage.setItem("xlibcMode","light");
                    lightmode();
                }
            }

            function lightmode() { // set to light mode
                document.getElementById("background").setAttribute("style","background-color: rgb(235,235,235);"); // chanhe background
                document.getElementsByTagName("footer")[0].setAttribute("style","background-color: rgb(235,235,235);"); // change footer background
                document.getElementById("title").setAttribute("style","color: #000000;"); // change text color
                document.getElementById("mode").setAttribute("style","color: #000000; float: left;");
                document.getElementById("copyright").setAttribute("style","color: #808080; float: right; cursor: default;");
                document.getElementById("mode").innerHTML = 'Switch to Dark Mode'; // change option
                document.getElementById("OSColors").setAttribute("style","margin: 10px auto; border-color: #000000; border-width: thin; border-style: solid;");
                document.getElementById("text").setAttribute("style","color: #ffffff; border-color: #000000; border-width: thin; border-style: solid; background-color: rgb(0,0,0);");
                document.getElementById("text").innerHTML = '0<br>0x00<p class="rgb">R: 0 G: 0 B: 0<br>1555: 0x0000</p>'; // reset values
                document.getElementById("TI").setAttribute("style","font-size: 170%; font-family: sans-serif; font-weight: bold; text-align: center; margin: 5px 0px; padding: 0px;"); // change text color
                document.getElementsByTagName('td')[0].setAttribute('style','background-color: rgb(0,0,0); border: solid white 1px; padding: 0px;'); // draw selection box
            }

            function darkmode() { // set to dark mode
                document.getElementById("background").setAttribute("style","background-color: rgb(40,40,40);"); // change background
                document.getElementsByTagName("footer")[0].setAttribute("style","background-color: rgb(40,40,40);"); // change footer background
                document.getElementById("title").setAttribute("style","color: #ffffff;"); // change text color
                document.getElementById("mode").setAttribute("style","color: #ffffff; float: left;");
                document.getElementById("copyright").setAttribute("style","color: #b3b3b3; float: right; cursor: default;");
                document.getElementById("mode").innerHTML = 'Switch to Light Mode'; // change option
                document.getElementById("OSColors").setAttribute("style","margin: 10px auto; border-color: #ffffff; border-width: thin; border-style: solid;"); // change border color
                document.getElementById("text").setAttribute("style","color: #ffffff; border-color: #ffffff; border-width: thin; border-style: solid; background-color: rgb(0,0,0);");
                document.getElementById("text").innerHTML = '0<br>0x00<p class="rgb">R: 0 G: 0 B: 0<br>1555: 0x0000</p>'; // reset values
                document.getElementById("TI").setAttribute("style","font-size: 170%; font-family: sans-serif; font-weight: bold; text-align: center; margin: 5px 0px; padding: 0px; color: #ffffff;"); // change text color
                document.getElementsByTagName('td')[0].setAttribute('style','background-color: rgb(0,0,0); border: solid white 1px; padding: 0px;'); // draw selection box
            }

            // draw hover box
            function hover(red,green,blue,tagNum) {
                if ((oldHover != oldn) && oldHover < 256) document.getElementsByTagName('td')[oldHover].setAttribute('style',`background-color: rgb(${oldHoverR},${oldHoverG},${oldHoverB});`);
                if ((oldHover != oldn) && oldHover > 255) {
                    if (oldHover > 264 && oldHover < 270) document.getElementsByTagName('td')[oldHover].setAttribute('style',`background-color: rgb(${oldHoverR},${oldHoverG},${oldHoverB}); color: #000000;`);
                    else document.getElementsByTagName('td')[oldHover].setAttribute('style',`background-color: rgb(${oldHoverR},${oldHoverG},${oldHoverB}); color: #ffffff;`);
                }
                if (((tagNum > 131 && tagNum % 8 > 3) && tagNum < 256) || tagNum > 264 && tagNum < 270) document.getElementsByTagName('td')[tagNum].setAttribute('style',`background-color: rgb(${red},${green},${blue}); border: solid black 1px; padding: 0px; color: #000000;`);
                else document.getElementsByTagName('td')[tagNum].setAttribute('style',`background-color: rgb(${red},${green},${blue}); border: solid white 1px; padding: 0px;`);
                oldHover = tagNum;
                oldHoverR = red;
                oldHoverG = green;
                oldHoverB = blue;
            }

            function onMouseOut() { // when not over a table
                if ((oldHover != oldn) && oldHover < 256) document.getElementsByTagName('td')[oldHover].setAttribute('style',`background-color: rgb(${oldHoverR},${oldHoverG},${oldHoverB});`);
                if ((oldHover != oldn) && oldHover > 255) {
                    if (oldHover > 264 && oldHover < 270) document.getElementsByTagName('td')[oldHover].setAttribute('style',`background-color: rgb(${oldHoverR},${oldHoverG},${oldHoverB}); color: #000000;`);
                    else document.getElementsByTagName('td')[oldHover].setAttribute('style',`background-color: rgb(${oldHoverR},${oldHoverG},${oldHoverB}); color: #ffffff;`);
                }
            }
        </script>
    </head>
    <body id="background">
        <h3 id="mode" onclick="changemode()" style="float: left;">Switch to Dark Mode</h3> <!-- mode selector -->
        <h3 id="copyright" style="color: #808080; float: right; cursor: default;">&copy; 2021 RoccoLox Programs</h3>
        <br>
        <h1 id="title">Xlibc Color Picker</h1>
        <table cellspacing=0 onmouseout="onMouseOut()">
            <tr id="row0"></tr>
            <tr id="row1"></tr>
            <tr id="row2"></tr>
            <tr id="row3"></tr>
            <tr id="row4"></tr>
            <tr id="row5"></tr>
            <tr id="row6"></tr>
            <tr id="row7"></tr>
        </table>
        <p id="text" style="background-color: #000000; color: #ffffff; border-color: #000000; border-width: thin; border-style: solid;">
            0<br>0x00
        </p>
        <p class="osRGB" id="osRGB" style="padding: 0px; margin: 0px;"></p> <!-- for displaying TI-OS color values -->
        <table id="OSColors" style="margin: 10px auto; border-color: #000000; border-width: thin; border-style: solid;" cellspacing=0 onmouseout="onMouseOut()">
            <tr>
                <td class="osColors" style="background-color: rgb(0,0,255);" onclick="OScolor('~25',24,32,200,'0x19',0,0,225,256,'0x0C99','0x001F')" onmouseover="hover(0,0,255,256)">BLUE</td>
                <td class="osColors" style="background-color: rgb(255,0,0);" onclick="OScolor('~224',224,28,0,'0xE0',255,0,0,257,'0x7060','0x7C00')" onmouseover="hover(255,0,0,257)">RED</td>
                <td class="osColors" style="background-color: rgb(0,0,0);" onclick="OScolor('0',0,0,0,'0x00',0,0,0,258,'0x0000','0x0000')" onmouseover="hover(0,0,0,258)">BLACK</td>
                <td class="osColors" style="background-color: rgb(255,0,255);" onclick="OScolor('~249',248,60,200,'0xF9',255,0,255,259,'0x7CF9','0x7C1F')" onmouseover="hover(255,0,255,259)">MAGENTA</td>
                <td class="osColors" style="background-color: rgb(0,158,0);" onclick="OScolor('~5',0,160,40,'0x05',0,158,0,260,'0x0285','0x0260')" onmouseover="hover(0,158,0,260)">GREEN</td>
                <td class="osColors" style="background-color: rgb(255,132,42);" onclick="OScolor('~227',224,124,24,'0xE3',255,132,42,261,'0x71E3','0x7E05')" onmouseover="hover(255,132,42,261)">ORANGE</td>
                <td class="osColors" style="background-color: rgb(182,32,0);" onclick="OScolor('~160',160,20,0,'0xA0',182,32,0,262,'0x5040','0x5880')" onmouseover="hover(182,32,0,262)">BROWN</td>
                <td class="osColors" style="background-color: rgb(0,0,134);" onclick="OScolor('~16',16,0,128,'0x10',0,0,134,263,'0810','0x0010')" onmouseover="hover(0,0,134,263)">NAVY</td>
                <td class="osColors" style="background-color: rgb(0,146,255);" onclick="OScolor('~28',24,128,224,'0x1C',0,146,255,264,'0x0E1C','0x025F')" onmouseover="hover(0,146,255,264)">LTBLUE</td>
                <td class="osColors" style="background-color: rgb(255,255,0); color: #000000;" onclick="OScolor('~231',224,252,56,'0xE7',255,255,0,265,'0x73E7','0x7FE0')" onmouseover="hover(255,255,0,265)">YELLOW</td>
                <td class="osColors" style="background-color: rgb(255,255,255); color: #000000;" onclick="OScolor('~255',248,252,248,'0xFF',255,255,255,266,'0x7FFF','0x7FFF')" onmouseover="hover(255,255,255,266)">WHITE</td>
                <td class="osColors" style="background-color: rgb(231,227,231); color: #000000;" onclick="OScolor('~222',216,216,240,'0xDE',231,227,231,267,'0x6F7E','0x739C')" onmouseover="hover(231,227,231,267)">LTGRAY</td>
                <td class="osColors" style="background-color: rgb(199,195,199); color: #000000;" onclick="OScolor('No known',199,195,199,'close matches',199,195,199,268,'0x6318','0x6318')" onmouseover="hover(199,195,199,268)">MEDGRAY</td>
                <td class="osColors" style="background-color: rgb(142,138,142); color: #000000;" onclick="OScolor('No known',142,138,142,'close matches',142,138,142,269,'0x4631','0x4631')" onmouseover="hover(142,138,142,269)">GRAY</td>
                <td class="osColors" style="background-color: rgb(81,85,81);" onclick="OScolor('~74',72,72,80,'0x4A',81,85,81,270,'0x252A','0x294A')" onmouseover="hover(81,85,81,270)">DARKGRAY</td>
            </tr>
        </table>
        <p  id ="TI" style="font-size: 170%; font-family: sans-serif; font-weight: bold; text-align: center; margin: 5px 0px; padding: 0px;">TI-OS Colors</p>
        <br>
        <footer> <!-- advertising! -->
            <hr style="margin: 0px; margin-bottom: 5px;">
            <a href="https://www.cemetech.net/forum/viewtopic.php?t=17446&start=0&postdays=0&postorder=asc&highlight=" target="_blank">Ask a question or suggest a feature...</a>
            <a href="https://github.com/RoccoLoxPrograms/XlibcColorPicker/releases" target="_blank" style="float: right;">Download the newest version...</a>
        </footer>
        <script type="text/javascript">
            // define all of these variables
            var r = 0;
            var g = 0;
            var b = 0;
            var n = 0;
            var oldn = n;
            var oldr = r;
            var oldg = g;
            var oldb = b;
            var red = 0;
            var green = 0;
            var greenIncrease;
            var blue = 0;
            var hex = '0x00';
            var oldHover = 0;
            var oldHoverR = 0;
            var oldHoverG = 0;
            var oldHoverB = 0;
            // yes, there are a lot
            for (var i = 0; i < 256; i++) {
                hex = '0x' + i.toString(16).toUpperCase();
                if (i < 16) hex = '0x0' + i.toString(16).toUpperCase();
                if ((i % 8 == 0) && i != 0) red += 8;
                if (i % 32 == 0 ) greenIncrease = 4 * (i / 32);
                if (i % 8 != 0) green += 32;
                else green = 0 + greenIncrease;
                blue += 8;
                if (i % 32 == 0) blue = 0;
                var td = document.createElement('TD');
                var ID = 'row' + Math.floor((i / 32)).toString();
                document.getElementById(ID).appendChild(td);
                document.getElementsByTagName('td')[i].setAttribute('style',`background-color: rgb(${red},${green},${blue});`);
                document.getElementsByTagName('td')[i].setAttribute('onmouseover',`hover(${red},${green},${blue},${i})`);
                var c1555 = ((red >> 3) << 10) | ((green >> 3) << 5) | (blue >> 3); // thank you MateoConLechuga (taken from the CE C toolchain)
                document.getElementsByTagName('td')[i].setAttribute('onclick',`color(${i},${red},${green},${blue},'${hex}',${c1555})`);
            }
            if (localStorage.getItem("xlibcMode") == 'dark') { // switch to dark mode
                darkmode();
            } else { // default mode is light
                document.getElementById("text").innerHTML = '0<br>0x00<p class="rgb">R: 0 G: 0 B: 0<br>1555: 0x0000</p>';
                document.getElementsByTagName("footer")[0].setAttribute("style","background-color: rgb(235,235,235);");
                localStorage.setItem("xlibcMode","light");
                document.getElementsByTagName('td')[0].setAttribute('style','background-color: rgb(0,0,0); border: solid white 1px; padding: 0px;');
            }
        </script>
    </body>
</html>
