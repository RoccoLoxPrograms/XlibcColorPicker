<!DOCTYPE html> <!-- February 2021 - RoccoLox Programs -->
<!-- 
    Thank you Privacy_Dragon for your help.
    Thank you mr womp womp and KMisthebomb for your code suggestions.
    Thank you Zeroko for your rgb888 to rgb1555 conversion code.
    Thank you epsilon5 for your suggestions.
    Thank you to anyone else who suggested features and has used this program.
-->
<html lang="en">
    <head>
        <title>Xlibc Color Picker</title>
        <style type="text/css"> /* CSS styling */
            body {
                background-color: rgb(243,243,243);
            }
            tr {
                display: flex;
            }
            div {
                cursor: pointer; /* thank you KMisthebomb */
                width: 35px;
                height: 35px;
                border-style: none;
                display: flex;
                padding: 1px;
            }
            div.osColors {
                display: flex;
                padding: 1px;
                width: 100%;
                justify-content: center;
                align-items: center;
                color: #ffffff;
                font-family: sans-serif;
                font-weight: bold;
                cursor: pointer;
                height: 35px;
                border-style: none;
            }
            div.table {
                display: flex;
                margin: 10px auto;
                width: auto;
                background-color: #000000;
                border: solid black 1px;
                height: fit-content;
                justify-content: center;
            }
            table {
                display: table;
                margin: auto;
                justify-content: center;
                border-style: hidden;
            }
            p {
                text-align: center;
                font-weight: bold;
                font-size: 300%;
                padding: 2%;
                font-family: sans-serif;
                margin: 40px auto 25px auto;
            }
            p.rgb {
                text-align: center;
                font-family: sans-serif;
                font-size: 45%;
                margin: 0px;
                padding: 10px 0px 0px 0px;
            }
            p.osRGB {
                text-align: center;
                font-family: sans-serif;
                font-size: 125%;
            }
            h1 {
                margin: 5px 0px 0px 0px;
                text-align: center;
                font-size: 250%;
                font-family: sans-serif;
                font-weight: normal;
                text-decoration: underline;
            }
            h3 {
                color: #000000;
                margin: 0px;
                cursor: pointer;
            }
            footer {
                background-color: rgb(243,243,243);
                bottom: 0px;
                left: 0px;
                position: fixed;
                width: 100%;
            }
            a {
                text-decoration: none;
                color: #0179f9;
                font-family: sans-serif;
                font-size: 110%;
                padding: 0px 5px 5px 5px;
            }
        </style>
        <script type="text/javascript">
            // display xlibc colors
            function color(n,r,g,b,hex,c1555) {
                // remove TI-OS color box
                document.getElementById('osRGB').setAttribute("style","padding: 0px; margin: 0px;");
                document.getElementById('osRGB').innerHTML = '';
                if (n > 131 && n % 8 > 3) {
                    if (localStorage.getItem("RLP_color_picker_color_mode_090419") == 'light') { // for light mode
                        document.getElementById('text').setAttribute('style',`background-color: rgb(${r}, ${g}, ${b}); color: #000000; border-color: #000000; border-width: thin; border-style: solid;`); // display xlibc color
                    } else { // for dark mode
                        document.getElementById('text').setAttribute('style',`background-color: rgb(${r}, ${g}, ${b}); color: #000000; border-color: #ffffff; border-width: thin; border-style: solid;`);
                    }
                } else {
                    if (localStorage.getItem("RLP_color_picker_color_mode_090419") == 'light') { // for light mode
                        document.getElementById('text').setAttribute('style',`background-color: rgb(${r}, ${g}, ${b}); color: #ffffff; border-color: #000000; border-width: thin; border-style: solid;`); // display xlibc color
                    } else { // for dark mode
                        document.getElementById('text').setAttribute('style',`background-color: rgb(${r}, ${g}, ${b}); color: #ffffff; border-color: #ffffff; border-width: thin; border-style: solid;`);
                    }
                }
                c1555 = c1555.toString(16).toUpperCase(); // convert the 1555 value
                // add additional 0's
                if (c1555.length == 1) c1555 = '0x000' + c1555;
                else if (c1555.length == 2) c1555 = '0x00' + c1555;
                else if (c1555.length == 3) c1555 = '0x0' + c1555;
                else if (c1555.length == 4) c1555 = '0x' + c1555;
                document.getElementById('text').innerHTML = `${n}<br>${hex}<p class="rgb">R: ${r} G: ${g} B: ${b}<br>1555: ${c1555}</p>`; // display xlibc values
                if (oldn > 265 && oldn < 271)  document.getElementsByTagName('div')[oldn].setAttribute("style",`background-color: rgb(${oldr},${oldg},${oldb}); color: #000000;`); // remove selection box
                else document.getElementsByTagName('div')[oldn].setAttribute("style",`background-color: rgb(${oldr}, ${oldg}, ${oldb});`);
                if (n > 131 && n % 8 > 3) document.getElementsByTagName('div')[n].setAttribute("style",`background-color: rgb(${r}, ${g}, ${b}); border: solid black 1px; padding: 0px;`); // add selection box
                else document.getElementsByTagName('div')[n].setAttribute("style",`background-color: rgb(${r}, ${g}, ${b}); border: solid white 1px; padding: 0px;`);
                // copy variable values
                oldn = n;
                oldr = r;
                oldg = g;
                oldb = b;
            }

            // display TI-OS colors
            function OScolor(n,r,g,b,hex,or,og,ob,tagNum,c1555,OSc1555) {
                // remove selection box
                document.getElementsByTagName('div')[oldn].setAttribute("style",`background-color: rgb(${oldr}, ${oldg}, ${oldb});`);
                if (tagNum > 265 && tagNum < 271) {
                    if (localStorage.getItem("RLP_color_picker_color_mode_090419") == 'light') { // for light mode
                        document.getElementById('text').setAttribute('style',`background-color: rgb(${r}, ${g}, ${b}); color: #000000; border: solid black thin; padding: 0.5% 2%; margin: 40px 0px 0px 0px;`); // display xlibc equivalent
                        document.getElementById('osRGB').setAttribute('style',`background-color: rgb(${or}, ${og}, ${ob}); color: #000000; border: solid black thin; padding: 0.5% 2%; margin: 0px;`); // display actual color
                    } else { // for dark mode
                        document.getElementById('text').setAttribute('style',`background-color: rgb(${r}, ${g}, ${b}); color: #000000; border: solid white thin; padding: 0.5% 2%; margin: 40px 0px 0px 0px;`);
                        document.getElementById('osRGB').setAttribute('style',`background-color: rgb(${or}, ${og}, ${ob}); color: #000000; border: solid white thin; padding: 0.5% 2%; margin: 0px;`);
                    }
                } else {
                    if (localStorage.getItem("RLP_color_picker_color_mode_090419") == 'light') { // for light mode
                        document.getElementById('text').setAttribute('style',`background-color: rgb(${r}, ${g}, ${b}); color: #ffffff; border: solid black thin; padding: 0.5% 1%; margin: 40px 0px 0px 0px;`); // display xlibc equivalent
                        document.getElementById('osRGB').setAttribute('style',`background-color: rgb(${or}, ${og}, ${ob}); color: #ffffff; border: solid black thin; padding: 0.5% 2%; margin: 0px;`); // display actual color
                    } else { // for dark mode
                        document.getElementById('text').setAttribute('style',`background-color: rgb(${r}, ${g}, ${b}); color: #ffffff; border: solid white thin; padding: 0.5% 2%; margin: 30px 0px 0px 0px;`);
                        document.getElementById('osRGB').setAttribute('style',`background-color: rgb(${or}, ${og}, ${ob}); color: #ffffff; border: solid white thin; padding: 0.5% 2%; margin: 0px;`);
                    }
                }
                document.getElementById('text').innerHTML = `${n}<br>${hex}<p class="rgb">R: ${r} G: ${g} B: ${b}<br>1555: ${c1555}</p>`; // xlibc equivalent color value
                document.getElementById('osRGB').innerHTML = `R: ${or} G: ${og} B: ${ob}<br>1555: ${OSc1555}`; // display actual rgb value
                if (oldn > 265 && oldn < 271)  document.getElementsByTagName('div')[oldn].setAttribute("style",`background-color: rgb(${oldr}, ${oldg}, ${oldb}); color: #000000;`); // remove selection box
                else document.getElementsByTagName('div')[oldn].setAttribute("style",`background-color: rgb(${oldr}, ${oldg}, ${oldb});`);
                if (tagNum > 265 && tagNum < 271) document.getElementsByTagName('div')[tagNum].setAttribute("style",`background-color: rgb(${or}, ${og}, ${ob}); color: #000000; border: solid black 1px; padding: 0px;`); // add selection box
                else document.getElementsByTagName('div')[tagNum].setAttribute("style",`background-color: rgb(${or}, ${og}, ${ob}); border: solid white 1px; padding: 0px;`);
                // copy variable values
                oldn = tagNum;
                oldr = or;
                oldg = og;
                oldb = ob;
                red = r;
                green = g;
                blue = b;
            }

            // mode changes
            function changeMode() {
                if (localStorage.getItem("RLP_color_picker_color_mode_090419") == 'light') { // change mode
                    localStorage.setItem("RLP_color_picker_color_mode_090419","dark");
                    darkMode();
                } else {
                    localStorage.setItem("RLP_color_picker_color_mode_090419","light");
                    lightMode();
                }
            }

            function lightMode() { // set to light mode
                document.getElementById("body").setAttribute("style","background-color: rgb(243,243,243);"); // chanhe background
                document.getElementsByTagName("footer")[0].setAttribute("style","background-color: rgb(243,243,243);"); // change footer background
                document.getElementById("title").setAttribute("style","color: #000000;"); // change text color
                document.getElementById('changeColorPicker').setAttribute('style','font-size: 100%;  margin: 0px 0px 15px 0px; padding: 0px; font-weight: normal; color: #000000;');
                document.getElementById("mode").setAttribute("style","color: #000000; float: left;");
                document.getElementById("copyright").setAttribute("style","color: #808080; float: right;");
                document.getElementById("mode").innerHTML = 'Switch to Dark Mode'; // change option
                document.getElementById("OSColors").setAttribute("style","margin: 10px auto; border: solid black thin; background-color: #000000;"); // change border color
                if (oldn > 255) { // if an OS color is being display
                    if (((oldn > 131 && oldn % 8 > 3) && oldn < 256) || oldn > 265 && oldn < 271) {
                        document.getElementById('text').setAttribute('style',`background-color: rgb(${red}, ${green}, ${blue}); color: #000000; border: solid black thin; border-style: solid; padding: 0.5% 2%; margin: 40px 0px 0px 0px;`);
                        document.getElementById('osRGB').setAttribute('style',`background-color: rgb(${oldr}, ${oldg}, ${oldb}); color: #000000; border: solid black thin; padding: 0.5% 2%; margin: 0px;`);
                    } else {
                        document.getElementById('text').setAttribute('style',`background-color: rgb(${red}, ${green}, ${blue}); color: #ffffff; border: solid black thin; solid; padding: 0.5% 2%; margin: 40px 0px 0px 0px;`);
                        document.getElementById('osRGB').setAttribute('style',`background-color: rgb(${oldr}, ${oldg}, ${oldb}); color: #ffffff; border: solid black thin; padding: 0.5% 2%; margin: 0px;`);
                    }
                } else { // else, just change the text foreground color
                    if (((oldn > 131 && oldn % 8 > 3) && oldn < 256) || oldn > 265 && oldn < 271) document.getElementById("text").setAttribute("style",`background-color: rgb(${oldr}, ${oldg}, ${oldb}); color: #000000; border: solid black thin;`);
                    else document.getElementById("text").setAttribute("style",`background-color: rgb(${oldr}, ${oldg}, ${oldb}); color: #ffffff; border: solid black thin;`);
                }
                document.getElementById("TI").setAttribute("style","font-size: 170%; font-family: sans-serif; font-weight: bold; text-align: center; margin: 5px 0px; padding: 0px;"); // change text color
            }

            function darkMode() { // set to dark mode
                document.getElementById("body").setAttribute("style","background-color: rgb(40,40,40);"); // change background
                document.getElementsByTagName("footer")[0].setAttribute("style","background-color: rgb(40,40,40);"); // change footer background
                document.getElementById("title").setAttribute("style","color: #ffffff;"); // change text color
                document.getElementById('changeColorPicker').setAttribute('style','font-size: 100%;  margin: 0px 0px 15px 0px; padding: 0px; font-weight: normal; color: #ffffff;');
                document.getElementById("mode").setAttribute("style","color: #ffffff; float: left;");
                document.getElementById("copyright").setAttribute("style","color: #b3b3b3; float: right;");
                document.getElementById("mode").innerHTML = 'Switch to Light Mode'; // change option
                document.getElementById("OSColors").setAttribute("style","margin: 10px auto; border: solid white thin; background-color: #ffffff;"); // change border color
                if (oldn > 255) { // if an OS color is being display
                    if (((oldn > 131 && oldn % 8 > 3) && oldn < 256) || oldn > 265 && oldn < 271) {
                        document.getElementById('text').setAttribute('style',`background-color: rgb(${red}, ${green}, ${blue}); color: #000000; border: solid white thin; solid; padding: 0.5% 2%; margin: 40px 0px 0px 0px;`);
                        document.getElementById('osRGB').setAttribute('style',`background-color: rgb(${oldr}, ${oldg}, ${oldb}); color: #000000; border: solid white thin; padding: 0.5% 2%; margin: 0px;`);
                    } else {
                        document.getElementById('text').setAttribute('style',`background-color: rgb(${red}, ${green}, ${blue}); color: #ffffff; border: solid white thin; border-style: solid; padding: 0.5% 2%; margin: 40px 0px 0px 0px;`);
                        document.getElementById('osRGB').setAttribute('style',`background-color: rgb(${oldr}, ${oldg}, ${oldb}); color: #ffffff; border: solid white thin; padding: 0.5% 2%; margin: 0px;`);
                    }
                } else { // else, just change the text foreground color
                    if (((oldn > 131 && oldn % 8 > 3) && oldn < 256) || oldn > 265 && oldn < 271) document.getElementById("text").setAttribute("style",`background-color: rgb(${oldr}, ${oldg}, ${oldb}); color: #000000; border: solid white thin;`);
                    else document.getElementById("text").setAttribute("style",`background-color: rgb(${oldr}, ${oldg}, ${oldb}); color: #ffffff; border: solid white thin;`);
                }
                document.getElementById("TI").setAttribute("style","font-size: 170%; font-family: sans-serif; font-weight: bold; text-align: center; margin: 5px 0px; padding: 0px; color: #ffffff;"); // change text color
            }

            // draw hover box
            function hover(red,green,blue,tagNum) {
                onMouseOut(); // remove hover box
                // deisplay new hover box
                if (((tagNum > 131 && tagNum % 8 > 3) && tagNum < 256) || tagNum > 265 && tagNum < 271) document.getElementsByTagName('div')[tagNum].setAttribute('style',`background-color: rgb(${red}, ${green}, ${blue}); border: solid black 1px; padding: 0px; color: #000000;`);
                else document.getElementsByTagName('div')[tagNum].setAttribute('style',`background-color: rgb(${red}, ${green}, ${blue}); border: solid white 1px; padding: 0px;`);
                // copy variable values
                oldHover = tagNum;
                oldHoverR = red;
                oldHoverG = green;
                oldHoverB = blue;
            }

            function onMouseOut() { // when not over a table, remove the hover box
                if ((oldHover != oldn) && oldHover < 256) document.getElementsByTagName('div')[oldHover].setAttribute('style',`background-color: rgb(${oldHoverR}, ${oldHoverG}, ${oldHoverB});`);
                if ((oldHover != oldn) && oldHover > 255) {
                    if (oldHover > 265 && oldHover < 271) document.getElementsByTagName('div')[oldHover].setAttribute('style',`background-color: rgb(${oldHoverR}, ${oldHoverG}, ${oldHoverB}); color: #000000;`);
                    else document.getElementsByTagName('div')[oldHover].setAttribute('style',`background-color: rgb(${oldHoverR}, ${oldHoverG}, ${oldHoverB}); color: #ffffff;`);
                }
            }
            
            function info() { // short description
                alert("Xlibc Color Picker\nBy RoccoLox Programs\nVersion: 1.7\nDate: 2021-08-06\nLicense: BSD 3-Clause License\nDescription: Xlibc color picker for C and Assembly programmers on the TI-84 Plus CE.");
            }
        </script>
    </head>
    <body id="body">
        <h3 id="mode" onclick="changeMode()" style="float: left;">Switch to Dark Mode</h3> <!-- mode selector -->
        <h3 id="copyright" style="color: #808080; float: right;" onclick="info()">&copy; 2021 RoccoLox Programs</h3>
        <br>
        <h1 id="title">Xlibc Color Picker</h1>
        <p id="changeColorPicker" style="font-size: 100%;  margin: 0px 0px 15px 0px; padding: 0px; font-weight: normal;">
            (<a href="https://roccoloxprograms.github.io/1555ColorPicker" style="padding: 0px;">1555 Color Picker</a>)
        </p>
        <table onmouseout="onMouseOut()" style="width: auto;">
            <tr id="row0"></tr>
            <tr id="row1"></tr>
            <tr id="row2"></tr>
            <tr id="row3"></tr>
            <tr id="row4"></tr>
            <tr id="row5"></tr>
            <tr id="row6"></tr>
            <tr id="row7"></tr>
        </table>
        <p id="text" style="background-color: #000000; color: #ffffff; border: solid black thin;"></p>
        <p class="osRGB" id="osRGB" style="padding: 0px; margin: 0px;"></p> <!-- for displaying TI-OS color values -->
        <div id="OSColors" class="table" onmouseout="onMouseOut()"> <!-- TI-OS color table -->
            <div class="osColors" style="background-color: rgb(0,0,255);" onclick="OScolor('~25',24,32,200,'0x19',0,0,225,257,'0x0C98','0x001F')" onmouseover="hover(0,0,255,257)">BLUE</div>
            <div class="osColors" style="background-color: rgb(255,0,0);" onclick="OScolor('~224',224,28,0,'0xE0',255,0,0,258,'0xEC60','0x7C00')" onmouseover="hover(255,0,0,258)">RED</div>
            <div class="osColors" style="background-color: rgb(0,0,0);" onclick="OScolor('0',0,0,0,'0x00',0,0,0,259,'0x0000','0x0000')" onmouseover="hover(0,0,0,259)">BLACK</div>
            <div class="osColors" style="background-color: rgb(255,0,255);" onclick="OScolor('~249',248,60,200,'0xF9',255,0,255,260,'0xF8F8','0x7C1F')" onmouseover="hover(255,0,255,260)">MAGENTA</div>
            <div class="osColors" style="background-color: rgb(0,158,0);" onclick="OScolor('~5',0,160,40,'0x05',0,158,0,261,'0x0285','0x8260')" onmouseover="hover(0,158,0,261)">GREEN</div>
            <div class="osColors" style="background-color: rgb(255,132,42);" onclick="OScolor('~227',224,124,24,'0xE3',255,132,42,262,'0xEDE3','0xFE05')" onmouseover="hover(255,132,42,262)">ORANGE</div>
            <div class="osColors" style="background-color: rgb(182,32,0);" onclick="OScolor('~160',160,20,0,'0xA0',182,32,0,263,'0xCC40','0x5880')" onmouseover="hover(182,32,0,263)">BROWN</div>
            <div class="osColors" style="background-color: rgb(0,0,134);" onclick="OScolor('~16',16,0,128,'0x10',0,0,134,264,'0x0810','0x0010')" onmouseover="hover(0,0,134,264)">NAVY</div>
            <div class="osColors" style="background-color: rgb(0,146,255);" onclick="OScolor('~28',24,128,224,'0x1C',0,146,255,265,'0x0E1B','0x025F')" onmouseover="hover(0,146,255,265)">LTBLUE</div>
            <div class="osColors" style="background-color: rgb(255,255,0); color: #000000;" onclick="OScolor('~231',224,252,56,'0xE7',255,255,0,266,'0x6FE7','0xFFE0')" onmouseover="hover(255,255,0,266)">YELLOW</div>
            <div class="osColors" style="background-color: rgb(255,255,255); color: #000000;" onclick="OScolor('~255',248,252,248,'0xFF',255,255,255,267,'0x7BFE','0xFFFF')" onmouseover="hover(255,255,255,267)">WHITE</div>
            <div class="osColors" style="background-color: rgb(231,227,231); color: #000000;" onclick="OScolor('~222',216,216,240,'0xDE',231,227,231,268,'0xEB5D','0x739C')" onmouseover="hover(231,227,231,268)">LTGRAY</div>
            <div class="osColors" style="background-color: rgb(199,195,199); color: #000000;" onclick="OScolor('~181',176,180,168,'0xB5',199,195,199,269,'0x56D4','0x6318')" onmouseover="hover(199,195,199,269)">MEDGRAY</div>
            <div class="osColors" style="background-color: rgb(142,138,142); color: #000000;" onclick="OScolor('No known',142,138,142,'close matches',142,138,142,270,'0x4631','0x4631')" onmouseover="hover(142,138,142,270)">GRAY</div>
            <div class="osColors" style="background-color: rgb(81,85,81);" onclick="OScolor('~74',72,72,80,'0x4A',81,85,81,271,'0x252A','0xA94A')" onmouseover="hover(81,85,81,271)">DARKGRAY</div>
        </div>
        <p  id ="TI" style="font-size: 170%; font-family: sans-serif; font-weight: bold; text-align: center; margin: 5px 0px; padding: 0px;">TI-OS Colors</p>
        <br> <!-- for smaller screen sizes -->
        <footer> <!-- advertising! -->
            <hr style="margin: 0px; margin-bottom: 5px;">
            <a href="https://www.cemetech.net/forum/viewtopic.php?t=17446&highlight=" target="_blank">Ask a question or suggest a feature</a>
            <a href="https://github.com/RoccoLoxPrograms/XlibcColorPicker/releases" target="_blank" style="float: right;">Download the newest version</a>
        </footer>
        <script type="text/javascript">
            document.getElementById("text").innerHTML = '0<br>0x00<p class="rgb">R: 0 G: 0 B: 0<br>1555: 0x0000</p>';
            // define all of these variables
            var red = 0, green = 0, blue = 0, oldn = 0, oldr = 0, oldg = 0, oldb = 0, oldHover = 0, oldHoverR = 0, oldHoverG = 0, oldHoverB = 0;
            for (var i = 0; i < 256; i++) {
                var hex = '0x' + i.toString(16).toUpperCase(); // find hex value of number
                if (i < 16) hex = '0x0' + i.toString(16).toUpperCase();
                // calculate rgb value of each xlibc color
                if ((i % 8 == 0) && i != 0) red += 8;
                if (i % 32 == 0) var greenIncrease = 4 * (i / 32);
                if (i % 8 != 0) green += 32;
                else green = 0 + greenIncrease;
                blue += 8;
                if (i % 32 == 0) blue = 0;
                // create the table cells
                var div = document.createElement('DIV');
                var ID = 'row' + Math.floor((i / 32)).toString();
                document.getElementById(ID).appendChild(div);
                // add attributes to the table columns
                document.getElementsByTagName('div')[i].setAttribute('style',`background-color: rgb(${red}, ${green}, ${blue});`);
                document.getElementsByTagName('div')[i].setAttribute('onmouseover',`hover(${red}, ${green}, ${blue}, ${i})`);
                var scaledGreen = Math.round(green * 63 / 255); // thank you Zeroko
                var c1555 = (Math.round(red * 31 / 255) << 10) | (scaledGreen << 15 & 0x8000) | (scaledGreen << 4 & 0x03E0) | Math.round(blue * 31 / 255);
                document.getElementsByTagName('div')[i].setAttribute('onclick',`color(${i}, ${red}, ${green}, ${blue}, '${hex}', ${c1555})`);
            }
            document.getElementsByTagName('div')[0].setAttribute('style','background-color: rgb(0,0,0); border: solid white 1px; padding: 0px;');
            // set mode
            if (localStorage.getItem("RLP_color_picker_color_mode_090419") == 'dark') darkMode(); // switch to dark mode
            else localStorage.setItem("RLP_color_picker_color_mode_090419","light"); // default mode is light
        </script>
    </body>
</html>
